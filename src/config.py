# -*- coding: utf-8 -*-
"""
設定ファイル: テーマ辞書・銘柄ユニバース・スコア重み等
後から辞書追加やパラメータ調整が容易な構造にしている
"""

# =============================================================================
# テーマ辞書 (テーマ名 → キーワードリスト)
# 各テーマに属するキーワードを定義。完全一致ではなく部分一致で検索する
# =============================================================================
THEME_KEYWORDS = {
    "半導体": [
        "半導体", "ウエハ", "ウェハ", "ファウンドリ", "DRAM", "NAND",
        "フラッシュメモリ", "ロジック半導体", "パワー半導体", "SiC",
        "半導体製造装置", "リソグラフィ", "EUV", "検査装置",
        "半導体材料", "フォトレジスト", "シリコン", "封止材",
        "半導体部材", "ウエハー", "チップ", "プロセッサ",
        "マイクロプロセッサ", "GPU", "ASIC", "FPGA",
    ],
    "AI・データセンター": [
        "AI", "人工知能", "機械学習", "深層学習", "ディープラーニング",
        "データセンター", "クラウド", "GPU", "生成AI", "LLM",
        "大規模言語モデル", "推論", "学習", "AIサーバー",
        "AIアクセラレータ", "HPC", "高性能計算", "エッジAI",
        "AIチップ", "NVIDIA", "ChatGPT", "Copilot",
    ],
    "通信インフラ": [
        "5G", "6G", "通信", "ネットワーク", "基地局",
        "光通信", "光ファイバ", "光ファイバー", "光部品",
        "ルーター", "スイッチ", "通信機器", "通信インフラ",
        "ブロードバンド", "IoT", "モバイル通信", "無線",
        "電波", "アンテナ", "通信半導体",
    ],
    "車載・電装": [
        "車載", "EV", "電気自動車", "ADAS", "自動運転",
        "電装品", "ECU", "インバータ", "モーター",
        "車載半導体", "xEV", "HEV", "PHEV", "BEV",
        "電動化", "パワートレイン", "バッテリー", "蓄電池",
        "車載カメラ", "LiDAR", "センサー",
    ],
    "コンテンツ・エンタメ×テクノロジー": [
        "ゲーム", "エンターテインメント", "コンテンツ", "メタバース",
        "VR", "AR", "XR", "ストリーミング", "動画配信",
        "アニメ", "IP", "プラットフォーム", "デジタルコンテンツ",
        "eスポーツ",
    ],
    "セキュリティ・防衛": [
        "セキュリティ", "サイバーセキュリティ", "防衛", "防衛関連",
        "監視", "セキュリティシステム", "暗号", "認証",
        "ファイアウォール", "防衛装備",
    ],
    "設備投資・FA": [
        "設備投資", "FA", "ファクトリーオートメーション", "工作機械",
        "ロボット", "産業用ロボット", "自動化", "省人化",
        "スマートファクトリー", "産業機器", "制御機器",
        "計測機器", "検査装置",
    ],
    "電子部品・デバイス": [
        "電子部品", "コンデンサ", "抵抗器", "コネクタ",
        "プリント基板", "基板", "MLCC", "積層セラミック",
        "センサー", "アクチュエータ", "モジュール",
        "受動部品", "能動部品",
    ],
}

# =============================================================================
# 売買シグナル辞書
# =============================================================================
SIGNAL_KEYWORDS = {
    "positive": [
        "買い付け", "買い増し", "新規投資", "組み入れ", "組入れ",
        "注目", "期待", "恩恵", "拡大", "成長", "加速",
        "回復", "改善", "好調", "堅調", "底堅い",
        "積極的", "引き上げ", "高める", "有望", "魅力的",
        "追い風", "需要増", "需要拡大",
    ],
    "cautious": [
        "売却", "一部売却", "利益確定", "入れ替え", "慎重",
        "選別", "絞り込み", "リスク", "不透明", "減速",
        "鈍化", "下振れ", "懸念", "逆風", "調整",
        "圧縮", "削減", "抑制", "警戒",
    ],
}

# =============================================================================
# 銘柄評価観点辞書
# 解説文から「ファンドが評価している観点」を抽出するためのキーワード
# =============================================================================
EVALUATION_ASPECTS = {
    "AIインフラ恩恵度": [
        "AI", "人工知能", "データセンター", "クラウド", "GPU",
        "生成AI", "AIサーバー", "HPC",
    ],
    "半導体関連度": [
        "半導体", "半導体製造装置", "半導体材料", "半導体部材",
        "ウエハ", "フォトレジスト", "EUV", "リソグラフィ",
    ],
    "グローバル競争優位性": [
        "グローバル", "世界", "海外", "シェア", "世界シェア",
        "首位", "トップ", "競争力", "技術力", "独自技術",
        "ニッチ", "寡占", "参入障壁",
    ],
    "構造改革・収益改善期待": [
        "構造改革", "収益改善", "収益性", "利益率", "マージン",
        "コスト削減", "効率化", "事業再編", "選択と集中",
        "高付加価値", "価格転嫁",
    ],
    "成長性・需要拡大": [
        "成長", "拡大", "需要", "増収", "増益",
        "伸長", "好調", "回復", "加速", "新製品",
        "新規事業", "中期計画",
    ],
}

# =============================================================================
# 候補銘柄ユニバース (Option C: 事前定義リスト)
# 情報エレクトロニクス関連の主要日本株
# 後からCSVで差し替え可能
# =============================================================================
CANDIDATE_UNIVERSE = [
    # 半導体製造装置
    {"name": "東京エレクトロン", "sector": "半導体製造装置", "code": "8035"},
    {"name": "アドバンテスト", "sector": "半導体製造装置", "code": "6857"},
    {"name": "ディスコ", "sector": "半導体製造装置", "code": "6146"},
    {"name": "レーザーテック", "sector": "半導体製造装置", "code": "6920"},
    {"name": "SCREEN", "sector": "半導体製造装置", "code": "7735"},
    {"name": "KOKUSAI ELECTRIC", "sector": "半導体製造装置", "code": "6525"},
    # 半導体・電子部品
    {"name": "ルネサスエレクトロニクス", "sector": "半導体", "code": "6723"},
    {"name": "ソシオネクスト", "sector": "半導体", "code": "6526"},
    {"name": "ローム", "sector": "半導体", "code": "6963"},
    {"name": "太陽誘電", "sector": "電子部品", "code": "6976"},
    {"name": "村田製作所", "sector": "電子部品", "code": "6981"},
    {"name": "TDK", "sector": "電子部品", "code": "6762"},
    {"name": "京セラ", "sector": "電子部品", "code": "6971"},
    {"name": "日東電工", "sector": "電子部品", "code": "6988"},
    {"name": "イビデン", "sector": "電子部品", "code": "4062"},
    {"name": "新光電気工業", "sector": "半導体パッケージ", "code": "6967"},
    # 半導体材料
    {"name": "信越化学工業", "sector": "半導体材料", "code": "4063"},
    {"name": "SUMCO", "sector": "半導体材料", "code": "3436"},
    {"name": "東京応化工業", "sector": "半導体材料", "code": "4186"},
    {"name": "トリケミカル研究所", "sector": "半導体材料", "code": "4369"},
    # 情報通信・IT
    {"name": "NTTデータグループ", "sector": "IT", "code": "9613"},
    {"name": "富士通", "sector": "IT", "code": "6702"},
    {"name": "日本電気", "sector": "IT", "code": "6701"},
    {"name": "日本電信電話", "sector": "通信", "code": "9432"},
    {"name": "KDDI", "sector": "通信", "code": "9433"},
    {"name": "ソフトバンクグループ", "sector": "通信", "code": "9984"},
    {"name": "野村総合研究所", "sector": "IT", "code": "4307"},
    {"name": "オービック", "sector": "IT", "code": "4684"},
    {"name": "SCSK", "sector": "IT", "code": "9719"},
    {"name": "サイバーエージェント", "sector": "IT", "code": "4751"},
    {"name": "リクルートホールディングス", "sector": "サービス", "code": "6098"},
    # 電線・非鉄金属（実際の組入銘柄）
    {"name": "古河電気工業", "sector": "非鉄金属", "code": "5801"},
    {"name": "フジクラ", "sector": "非鉄金属", "code": "5803"},
    {"name": "住友電気工業", "sector": "非鉄金属", "code": "5802"},
    # ガラス
    {"name": "日本電気硝子", "sector": "ガラス", "code": "5214"},
    {"name": "AGC", "sector": "ガラス", "code": "5201"},
    # FA・産業機器
    {"name": "キーエンス", "sector": "FA", "code": "6861"},
    {"name": "ファナック", "sector": "FA", "code": "6954"},
    {"name": "安川電機", "sector": "FA", "code": "6506"},
    {"name": "オムロン", "sector": "FA", "code": "6645"},
    {"name": "SMC", "sector": "FA", "code": "6273"},
    # エレクトロニクス
    {"name": "ソニーグループ", "sector": "エレクトロニクス", "code": "6758"},
    {"name": "パナソニック", "sector": "エレクトロニクス", "code": "6752"},
    {"name": "日立製作所", "sector": "エレクトロニクス", "code": "6501"},
    {"name": "三菱電機", "sector": "電機", "code": "6503"},
    {"name": "キヤノン", "sector": "精密機器", "code": "7751"},
    {"name": "横河電機", "sector": "計測機器", "code": "6841"},
    # 車載・自動車関連
    {"name": "デンソー", "sector": "車載", "code": "6902"},
    {"name": "日本電産", "sector": "モーター", "code": "6594"},
    # ゲーム・コンテンツ
    {"name": "任天堂", "sector": "ゲーム", "code": "7974"},
    {"name": "スクウェア・エニックス", "sector": "ゲーム", "code": "9684"},
    {"name": "バンダイナムコ", "sector": "ゲーム", "code": "7832"},
    {"name": "カプコン", "sector": "ゲーム", "code": "9697"},
    # 光学・画像
    {"name": "HOYA", "sector": "光学", "code": "7741"},
    {"name": "浜松ホトニクス", "sector": "光学", "code": "6965"},
    {"name": "レノバ", "sector": "再エネ", "code": "9519"},
    # その他よく組み入れられる銘柄
    {"name": "ジャパンディスプレイ", "sector": "ディスプレイ", "code": "6740"},
    {"name": "双日", "sector": "商社", "code": "2768"},
    {"name": "SHIFT", "sector": "IT", "code": "3697"},
    {"name": "メルカリ", "sector": "IT", "code": "4385"},
    {"name": "Zホールディングス", "sector": "IT", "code": "4689"},
]

# =============================================================================
# 候補推定スコアの重み（デフォルト値）
# =============================================================================
SCORE_WEIGHTS = {
    "theme_match": 0.30,       # テーマ一致度
    "past_frequency": 0.20,    # 過去採用頻度/再登場傾向
    "description_sim": 0.15,   # 解説文特徴との類似度
    "sector_trend": 0.15,      # 業種配分変化方向との整合
    "signal_match": 0.10,      # 直近売買示唆文との整合
    "cycle_tendency": 0.10,    # 継続/入替サイクル傾向
}

# =============================================================================
# セクション識別用正規表現パターン
# =============================================================================
SECTION_PATTERNS = {
    "manager_comment": [
        r"運用担当者より",
    ],
    "investment_environment": [
        r"先月の投資環境",
        r"投資環境",
        r"市場環境",
        r"マーケット環境",
    ],
    "operation_review": [
        r"先月の運用経過",
        r"運用経過",
        r"運用状況",
        r"ファンドの運用状況",
        r"運用概況",
    ],
    "future_policy": [
        r"今後の運用方針",
        r"今後の方針",
        r"運用方針",
    ],
    "top_holdings": [
        r"組入上位10銘柄\s",
        r"組入上位\d*銘柄\s",
        r"組入れ上位",
        r"上位.*銘柄",
        r"主要な.*銘柄",
    ],
    "holdings_description": [
        r"組入上位10銘柄の解説",
        r"組入上位\d*銘柄の解説",
        r"銘柄の解説",
    ],
}

# =============================================================================
# 銘柄名正規化ルール
# =============================================================================
NORMALIZATION_RULES = {
    # 全角→半角の統一対象文字
    "fullwidth_to_halfwidth": True,
    # 除去パターン
    "remove_patterns": [
        r"（株）", r"\(株\)", r"株式会社", r"㈱",
        r"\s+",  # 余分空白
    ],
    # 表記ゆれ辞書 (正規化前 → 正規化後)
    "aliases": {
        "NEC": "日本電気",
        "ニデック": "日本電産",
        "ＮＴＴデータ": "NTTデータグループ",
        "NTTデータ": "NTTデータグループ",
        "NTT": "日本電信電話",
        "スクエニ": "スクウェア・エニックス",
        "スクウェアエニックス": "スクウェア・エニックス",
        "バンナム": "バンダイナムコ",
        "バンダイナムコホールディングス": "バンダイナムコ",
        "ソニー": "ソニーグループ",
        "パナソニックホールディングス": "パナソニック",
        "日立": "日立製作所",
        "ソフトバンクG": "ソフトバンクグループ",
        "SBG": "ソフトバンクグループ",
        "住友電工": "住友電気工業",
        "リクルートHD": "リクルートホールディングス",
        "リクルート": "リクルートホールディングス",
    },
}

# =============================================================================
# バックテスト設定
# =============================================================================
BACKTEST_CONFIG = {
    "min_training_months": 6,   # 最低学習期間（月数）
    "top_k_values": [3, 5, 10], # Top-K評価のK値
}
